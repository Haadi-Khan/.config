"use strict";var c=Object.defineProperty;var T=Object.getOwnPropertyDescriptor;var h=Object.getOwnPropertyNames;var S=Object.prototype.hasOwnProperty;var g=(e,s)=>{for(var r in s)c(e,r,{get:s[r],enumerable:!0})},$=(e,s,r,t)=>{if(s&&typeof s=="object"||typeof s=="function")for(let i of h(s))!S.call(e,i)&&i!==r&&c(e,i,{get:()=>s[i],enumerable:!(t=T(s,i))||t.enumerable});return e};var D=e=>$(c({},"__esModule",{value:!0}),e);var y={};g(y,{default:()=>w});module.exports=D(y);var o=require("@raycast/api");var n=require("@raycast/api"),m=require("child_process");var a=require("fs"),u=require("path");var l=e=>(e.d1=e.d1=="----"?void 0:e.d1,e.d2=e.d2=="----"?void 0:e.d2,Math.round((e.d1?new Date(e.d1):new Date).getTime()-(e.d2?new Date(e.d2):new Date).getTime())/1e3);var M=n.environment.supportPath+"/customTimers.json";function d(e){let s=n.environment.supportPath+"/"+e,r=`if [ -f "${s}" ]; then rm "${s}"; else echo "Timer deleted"; fi`,t=s.replace(".timer",".dismiss"),i=`if [ -f "${t}" ]; then rm "${t}"; else echo "Timer deleted"; fi`;(0,m.execSync)(r),(0,m.execSync)(i)}function p(){let e=[];return(0,a.readdirSync)(n.environment.supportPath).forEach(r=>{if((0,u.extname)(r)==".timer"){let t={name:"",secondsSet:-99,timeLeft:-99,originalFile:r,timeEnds:new Date};t.name=(0,a.readFileSync)(n.environment.supportPath+"/"+r).toString();let i=r.split("---");t.secondsSet=Number(i[1].split(".")[0]);let f=i[0].replace(/__/g,":");t.timeLeft=Math.max(0,Math.round(t.secondsSet-l({d2:f}))),t.timeEnds=new Date(f),t.timeEnds.setSeconds(t.timeEnds.getSeconds()+t.secondsSet),e.push(t)}}),e.sort((r,t)=>r.timeLeft-t.timeLeft),e}var w=async()=>{let e=p();if(e.length===0)return await(0,o.showToast)({style:o.Toast.Style.Failure,title:"No timers found!"});d(e[0].originalFile),await(0,o.closeMainWindow)(),(0,o.showHUD)(`Timer "${e[0].name}" stopped!`)};
